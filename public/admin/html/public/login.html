<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Finvise- Login </title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <title>Login </title>
    <link rel="stylesheet" href="./style.css">

</head>

<body>
    <!-- partial:index.partial.html -->
    <div class="mainContainer">
        <div class="container">
            <div class="logiform-container py-4">
                <div class="flex-container d-flex flex-wrap justify-content-center bg-light p-0">
                    <div class="column d-block p-3 p-md-4 p-lg-5 p getstarted-col">
                        <div
                            class="d-flex gap-4 content p-3 px-md-4 py-md-5 px-lg-5 child-w-100 flex-wrap position-relative h-100 align-items-center">
                            <div class="back-arrow position-relative">
                                <button class="btn btn-semitransparent rounded-pill py-0 px-4 py-lg-2 px-lg-5"><i
                                        class="fa-solid fa-arrow-right-long text-white"></i></button>
                            </div>
                            <div class="text-content position-relative">
                                <span class="text-secondary2">Hi Welcome!</span>
                                <h2 class="text-white">Let's Get Started</h2>
                                <p class="text-secondary2 mt-4">Sign In.
                                </p>
                            </div>
                            <div class="content-icon position-relative">
                                <img src="https://cdn.pixabay.com/photo/2016/06/15/16/16/man-1459246_1280.png" alt=""
                                    class="w-100">
                            </div>
                        </div>
                    </div>
                    <div class="column d-block p-3 d-flex align-items-center justify-content-center h-100">
                        <div class="content">
                            <div class="form-wrapper py-4">
                                <h2 class="mb-4">Sign In</h2>
                                <form id="loginForm" action="/login" method="POST">
                                    <div class="form-input mb-3 p-0">
                                        <label for="youremail" class="text-secondary">Your Email</label>
                                        <div class="input-relative position-relative mt-1 mt-lg-2">
                                            <input type="email"
                                                class="default-input rounded-pill py-1 ps-3 py-lg-2 input-required"
                                                name="yourEmail" id="yourEmail" maxlength="40" required>
                                            <div class="nameinput-icon-feedback icon-feedback">
                                                <i class="fa-solid fa-circle-exclamation text-danger icon"></i>
                                                <i class="fa-solid fa-circle-check text-success icon"></i>
                                            </div>
                                        </div>
                                        <small
                                            class="email-error-feedback error-feedback text-danger text-small"></small>
                                    </div>
                                    <div class="form-input mb-3 p-0">
                                        <label for="yourpassword" class="text-secondary">Your Password</label>
                                        <div class="input-relative position-relative mt-1 mt-lg-2">
                                            <input type="password"
                                                class="default-input rounded-pill py-1 ps-3 py-lg-2 input-required"
                                                name="yourPassword" id="yourPassword" maxlength="40" required>
                                            <div class="nameinput-icon-feedback icon-feedback">
                                                <i class="fa-solid fa-circle-exclamation text-danger icon"></i>
                                                <i class="fa-solid fa-circle-check text-success icon"></i>
                                            </div>
                                            <div id="showPassword" class="show-password" style="cursor: pointer;">
                                                <i class="fa-solid fa-eye icon"></i>
                                                <i class="fa-solid fa-eye-slash icon" style="display: none;"></i>
                                            </div>
                                        </div>
                                        <small><a href="javascript:void(0)" class="show-password"></a></small>
                                        <small class="pw-error-feedback error-feedback text-danger text-small"></small>
                                    </div>
                                    <div class="form-check mb-3 p-0">
                                        <input type="checkbox" name="rememberme" id="rememberMe">
                                        <label for="rememberMe">Remember me</label>
                                    </div>
                                    <div class="form-submit">
                                        <button id="btnLogin" type="button"
                                            class="btn btn-success w-100 rounded-pill py-lg-2 mt-1 mt-lg-2">
                                            Login
                                        </button>
                                    </div>
                                </form>
                                <div class="have-account-option text-center mt-2">
                                    <p>Don't have an account?
                                        <a href="signup.html"> Signup Here </a>
                                    </p>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Show password toggle functionality
        const showPassword = document.getElementById('showPassword');
        const passwordInput = document.getElementById('yourPassword');
        let passwordVisible = false;

        showPassword.addEventListener('click', () => {
            passwordVisible = !passwordVisible;
            if (passwordVisible) {
                passwordInput.type = 'text';
                showPassword.querySelector('.fa-eye').style.display = 'none';
                showPassword.querySelector('.fa-eye-slash').style.display = 'block';
            } else {
                passwordInput.type = 'password';
                showPassword.querySelector('.fa-eye').style.display = 'block';
                showPassword.querySelector('.fa-eye-slash').style.display = 'none';
            }
        });

        // Login button functionality
        document.getElementById('btnLogin').addEventListener('click', async (event) => {
            // Prevent default form submission
            event.preventDefault();

            const yourEmail = document.getElementById('yourEmail').value;
            const yourPassword = document.getElementById('yourPassword').value;

            // Validate input fields (optional, but recommended)
            if (!yourEmail || !yourPassword) {
                alert('Please fill in all required fields.');
                return;
            }

            const response = await fetch('/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ yourEmail, yourPassword }),
            });

            const data = await response.json();
            if (response.status === 400) {
                alert(data.message); // Show the alert for incorrect login details
                // Do not redirect; remain on the same page
            } else if (response.status === 200) {
                alert(data.message); // Show success message
                // Redirect to the dashboard or homepage after successful login
                window.location.href = 'bloglist.html'; // Update the URL as needed
            } else {
                alert('An unexpected error occurred. Please try again.'); // Handle other errors
            }
        });
    </script>


    <!-- partial -->

</body>

</html>